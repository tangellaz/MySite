!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("preact"),require("preact/compat")):"function"==typeof define&&define.amd?define(["preact","preact/compat"],t):(e=e||self).preactSsrPrepass=t(e.preact,e.compat)}(this,function(e,t){"use strict";function r(e,t){for(let r in t)e[r]=t[r];return e}function o(e,t){return Array.isArray(t)?t.reduce(o,e):null!=t&&!1!==t&&e.push(t),e}return function n(s,p,i){if(null==s||"object"!=typeof s)return Promise.resolve();let c=s.type,a=s.props,l=[];if(i=i||{},"function"==typeof c&&c!==e.Fragment&&c!==t.Suspense){let t,o=s.__c=new e.Component(a,i);o.__d=!0,o.__v=s,void 0===o.state&&(o.state={}),e.options.render&&e.options.render(s),e.options.__r&&e.options.__r(s);let l=!1,u=c.contextType,_=u&&i[u.__c],d=null!=u?_?_.props.value:u.__p||u.__:i;return c.prototype&&"function"==typeof c.prototype.render?(l=!0,o=s.__c=new c(a,d),o.__d=!0,o.__v=s,o.props=a,o.context=d,void 0===o.state&&(o.state={}),c.getDerivedStateFromProps?o.state=r(r({},o.state),c.getDerivedStateFromProps(o.props,o.state)):o.componentWillMount&&o.componentWillMount(),t=()=>{try{return Promise.resolve(o.render(o.props,o.state,o.context))}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}}):t=()=>{try{const t=e.options.__s;e.options.__s=!0;const r=Promise.resolve(c.call(s.__c,a,d));return e.options.__s=t,r}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}},(p?(p(s,l?o:void 0)||Promise.resolve()).then(t):t()).then(e=>(o.getChildContext&&(i=r(r({},i),o.getChildContext())),Array.isArray(e)?Promise.all(e.map(e=>n(e,p,i))):n(e,p,i)))}return a&&o(l=[],a.children).length?Promise.all(l.map(e=>n(e,p,i))):Promise.resolve()}});
//# sourceMappingURL=index.umd.js.map
