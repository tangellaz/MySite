"use strict";var e=require("preact"),t=require("preact/compat");function r(e,t){for(let r in t)e[r]=t[r];return e}function o(e,t){return Array.isArray(t)?t.reduce(o,e):null!=t&&!1!==t&&e.push(t),e}module.exports=function n(s,p,i){if(null==s||"object"!=typeof s)return Promise.resolve();let l=s.type,c=s.props,_=[];if(i=i||{},"function"==typeof l&&l!==e.Fragment&&l!==t.Suspense){let t,o=s.__c=new e.Component(c,i);o.__d=!0,o.__v=s,void 0===o.state&&(o.state={}),e.options.render&&e.options.render(s),e.options.__r&&e.options.__r(s);let _=!1,a=l.contextType,u=a&&i[a.__c],m=null!=a?u?u.props.value:a.__p||a.__:i;return l.prototype&&"function"==typeof l.prototype.render?(_=!0,o=s.__c=new l(c,m),o.__d=!0,o.__v=s,o.props=c,o.context=m,void 0===o.state&&(o.state={}),l.getDerivedStateFromProps?o.state=r(r({},o.state),l.getDerivedStateFromProps(o.props,o.state)):o.componentWillMount&&o.componentWillMount(),t=()=>{try{return Promise.resolve(o.render(o.props,o.state,o.context))}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}}):t=()=>{try{const t=e.options.__s;e.options.__s=!0;const r=Promise.resolve(l.call(s.__c,c,m));return e.options.__s=t,r}catch(e){return e&&e.then?e.then(t,t):Promise.reject(e)}},(p?(p(s,_?o:void 0)||Promise.resolve()).then(t):t()).then(e=>(o.getChildContext&&(i=r(r({},i),o.getChildContext())),Array.isArray(e)?Promise.all(e.map(e=>n(e,p,i))):n(e,p,i)))}return c&&o(_=[],c.children).length?Promise.all(_.map(e=>n(e,p,i))):Promise.resolve()};
//# sourceMappingURL=index.js.map
